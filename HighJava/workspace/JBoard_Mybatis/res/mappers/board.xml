<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="board">
	
	<!-- 
	  이 영역에 SQL문에 맞는 태그를 사용하여 SQL문을 기술한다.
	  
	  사용할 수 있는 기본적인 태그들
	  <select> ~~~ </select>
	  <insert> ~~~ </insert>
	  <update> ~~~ </update>
	  <delete> ~~~ </delete>
	
	위 태그에서 사용되는 속성들
	
	1) id : 해당 태그(SQL)를 호출할 때 namespace값과 연결하여 사용하는 고유 ID값
	
	2) parameterType : SQL문에 사용될 데이터가 들어있는 객체타입을 지정한다.
	                     (보통 VO클래스 또는 자바의 자료형이름 등이 사용된다.)
	
    3) resultType : select문을 실행한 결과를 담을 객체타입을 지정한다.
    				(보통 VO클래스 또는 자바의 자료형이름 등이 사용된다.)
    				
    4) resultMap : 결과레코드 컬럼명과 VO객체의 속성명이 다를 경우에 적절한 매핑을 위해 사용한다.
	
	 -->
	 
 	<resultMap type="vo.BoardVO" id="boardMap">
		<result column="board_no"  property="board_no" />
		<result column="board_writer"  property="board_writer" />
		<result column="board_title"  property="board_title" />
		<result column="board_content"  property="board_content" />
		<result column="board_date"  property="regDt" />
	</resultMap>
 
	

	<insert id="insertBoard" parameterType="vo.BoardVO">
	
	insert into jdbc_board
	( board_no, board_writer, board_title, board_content)
	values (#{board_no}, #{board_writer}, #{board_title}, #{board_content}) 
	
	
	</insert>
	
	
	<update id="updateBoard" parameterType="vo.BoardVO">
	
		update jdbc_board 
		set board__content = #{board__content} 
			, board__title = #{board__title}
			, board__writer = #{board__writer}
		where board_no = #{board_no} 
		
	</update>
	
	<delete id="deleteBoard" parameterType="BigDecimal">
		delete from jdbc_board where board_no = #{board_no}
	</delete>
	
	<select id="selectAll" resultType="vo.BoardVO">
		select * from jdbc_board
	</select>

	<select id="checkNo" parameterType="BigDecimal" resultType="int">
		select count(*) as cnt
		from jdbc_board
		where board_no = #{board_no}
	</select> 

	
	<select id="searchBoard" parameterType="vo.BoardVO" resultMap="boardMap">
		select *
		 from jdbc_board where 1=1 
		
		<if test='board_no != null and board_no != ""'>
			and board_no = #{board_no}
		</if>
		<if test='board_title != null and board_title != ""'>
			and board_title = #{board_title}
		</if>
		<if test='board_writer != null and board_writer != ""'>
			and board_writer = #{board_writer}
		</if>
		<if test='board_content != null and !board_content.equals("")'>
			and board_content like '%' || #{board_content} || '%'
		</if>
	
	</select>
	
	
	
	


</mapper>